# 画面・UI挙動 (UI/UX Behavior)

## 共通仕様
*   **タスクキー表示**:
    *   タスクの識別子として `INCO-123` のような形式で常に表示する。

## プロジェクト作成モーダル
*   **キー入力**:
    *   小文字が入力された場合、自動的に大文字に変換して表示/保持する。
    *   英数字以外の文字入力は無視または削除する。
*   **重複エラー**:
    *   保存実行時にキーの重複が検知された場合、入力フィールド直下にエラーメッセージ「そのプロジェクトキーは既に使用されています」を表示する。
*   **アイコン選択**:
    *   プリセットされたアイコン一覧から1つを選択可能にする。

## リストビュー (ListView)
*   **インライン編集 / 詳細オープン**:
    *   **タスク名（テキスト部分）のクリック**:
        *   **詳細オープン**: 即座にタスク詳細パネルを開く（または切り替える）。
        *   **インライン編集**: 同時に、リスト上の該当セルが入力モード（テキストボックス）に切り替わる。
        *   *目的*: 「詳細を見たい」ユーザーと「軽く名前を直したい」ユーザーの双方にとって、クリックアクションが"無視"されないようにする。
    *   **余白（セル内のpadding）のクリック**:
        *   タスク詳細パネルを開く（インライン編集は開始しない）。
    *   **終了**: `Enter` キー、`Esc` キー、またはフォーム外のクリックで保存・終了する。
*   **パネル展開の制御**:
    *   以下の項目をクリックした際は、詳細パネルの状態を変更せず、そのアクションのみを実行する：
        *   完了チェックボタン
        *   担当者アイコン
        *   ステータス / 優先度 / 種別 セレクタ
        *   期限日
    *   **ドラッグ&ドロップ**: 並べ替え等の操作中は詳細パネルの切り替えを行わない。

## タスク詳細パネル (Task Detail Panel)
*   **データ整合性**:
    *   パネル内の表示データ（セクションやステータスなど）は、リストビュー等と整合性が取れた状態（整形済みデータ）を表示する。
*   **開閉挙動**:
    *   URLクエリパラメータ (`?task=ID`) により開閉を制御する。
    *   パネルの外側（他の領域）をクリックした場合、パネルを閉じる。
    *   **自動切り替え**: パネルが開いている状態で、リスト上の「別のタスク」をクリックした場合、パネルを閉じずにそのままクリックしたタスクの詳細に切り替える。
*   **ヘッダーアクション**:
    *   **リンクコピー**: 🔗ボタンで現在のタスクURLをクリップボードにコピー。
    *   **メニュー (...)**:
        *   **タスクを複製**: 現在のタスクをコピーして新規作成（タイトルに `(コピー)` 付与）。
        *   **タスクを削除**: 確認ダイアログを経て削除。
